(this["webpackJsonp@agoric/wallet-frontend"]=this["webpackJsonp@agoric/wallet-frontend"]||[]).push([[0],{52:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a(48),i=a(93),l=a(27),u=a(32),s=a.n(u),m=a(40);function p(e){return E.apply(this,arguments)}function E(){return(E=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/vat",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.ok,a=e.res;return t?a:{}})).catch((function(e){console.log("Fetch Error",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=null;function f(e){var t=e.onConnect,a=e.onDisconnect,n=e.onMessage;d=new WebSocket(function(){var e=new URL("http://127.0.0.1:8000");return e.protocol="ws",e}()),t&&d.addEventListener("open",(function(){return t()})),a&&d.addEventListener("close",(function(){return a()})),n&&d.addEventListener("message",(function(e){var t=e.data;return n(t)}))}function g(){return!!d}function v(){g()&&(d.close(),d=null)}var b=function(e){return{type:"UPDATE_PURSES",payload:e}},O=function(e){return{type:"UPDATE_INBOX",payload:e}},h=a(15);var y=function(e,t){var a=t.type,n=t.payload;switch(a){case"ACTIVATE_CONNECTION":return function(e){return Object(h.a)({},e,{active:!0})}(e);case"DEACTIVATE_CONNECTION":return function(e){return Object(h.a)({},e,{active:!1})}(e);case"SERVER_CONNECTED":return function(e){return Object(h.a)({},e,{connected:!0})}(e);case"SERVER_DISCONNECTED":return function(e){return Object(h.a)({},e,{connected:!1})}(e);case"UPDATE_PURSES":return function(e,t){return Object(h.a)({},e,{purses:t})}(e,n);case"UPDATE_INBOX":return function(e,t){return Object(h.a)({},e,{inbox:t})}(e,n);case"REJECT_OFFER":return function(e,t){return p({type:"walletDeclineOffer",data:t}),e}(e,n);case"CONFIRM_OFFER":return function(e,t){return p({type:"walletAcceptOffer",data:t}),e}(e,n);default:throw new TypeError("Action not supported ".concat(a))}},N=Object(n.createContext)();function C(){return Object(n.useContext)(N)}var T=a(8),j=a(81),R=a(92),A=a(83),I=a(84),w=a(30),D=a(42),S=a.n(D),k=Object(j.a)((function(e){return{appBar:{position:"relative"},title:{flexGrow:1},icon:{marginRight:e.spacing(1)}}}));function x(e){var t=e.children,a=k();return r.a.createElement(A.a,{position:"absolute",className:a.appBar},r.a.createElement(I.a,null,r.a.createElement(S.a,{className:a.icon}),r.a.createElement(w.a,{variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Simple Wallet"),t))}var _=a(95),F=a(85),P=a(43),V=a.n(P),U=Object(j.a)((function(e){return{divider:{marginRight:e.spacing(2)}}}));function B(){var e=U(),t=C(),a=t.state,c=t.dispatch,o=a.active,i=a.connected,l=a.account;return Object(n.useEffect)((function(){return c({type:"ACTIVATE_CONNECTION"})}),[c]),r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(_.a,{className:e.divider,label:l||"anonymous",avatar:r.a.createElement(V.a,null)}),o?r.a.createElement(F.a,{variant:"contained",onClick:function(){c({type:"DEACTIVATE_CONNECTION"})}},"Disconnect"):r.a.createElement(F.a,{variant:"contained",onClick:function(){c({type:"ACTIVATE_CONNECTION"})}},"Connect"))}var J=a(65),L=a(90),W=a(86),M=a(96),G=a(87),z=a(88),X=a(44),q=a.n(X),H=Object(j.a)((function(e){return{icon:{minWidth:24,marginRight:e.spacing(2)}}}));function K(){var e=H(),t=C().state.purses;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{variant:"h6"},"Purses"),Array.isArray(t)&&t.length>0?r.a.createElement(W.a,null,t.map((function(t){var a=t.purseName,n=t.assayId,c=t.allegedName,o=t.extent;return r.a.createElement(M.a,{key:a,value:a,divider:!0},r.a.createElement(G.a,{className:e.icon},r.a.createElement(q.a,null)),r.a.createElement(z.a,{primary:a,secondary:"".concat(o," ").concat(n," (").concat(c,")")}))}))):r.a.createElement(w.a,{color:"inherit"},"No purses."))}var Q=a(4),Y=a(28),Z=a(29),$=a(89),ee=a(94),te=a(91),ae=a(45),ne=a.n(ae),re=a(46),ce=a.n(re),oe=a(47),ie=a.n(oe),le=Object(j.a)((function(e){return{icon:{margin:e.spacing(1)},buttons:{"& button ~ button":{marginLeft:e.spacing(1)}}}})),ue=Object(Q.a)((function(e){return{root:{color:e.palette.getContrastText(Y.a[500]),backgroundColor:Y.a[500],"&:hover":{backgroundColor:Y.a[700]}}}}))($.a),se=Object(Q.a)((function(e){return{root:{color:e.palette.getContrastText(Z.a[500]),backgroundColor:Z.a[500],"&:hover":{backgroundColor:Z.a[700]}}}}))($.a),me=Object(Q.a)((function(e){return{root:{width:e.spacing(10),color:Y.a[800],borderColor:Y.a[800]}}}))(_.a),pe=Object(Q.a)((function(e){return{root:{width:e.spacing(10),color:Z.a[800],borderColor:Z.a[800]}}}))(_.a);function Ee(){var e=le(),t=C(),a=t.state,n=t.dispatch,c=a.inbox;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{variant:"h6"},"Transactions"),Array.isArray(c)&&c.length>0?r.a.createElement(W.a,null,c.map((function(t){var a=t.instanceId,c=t.date,o=t.purseName0,i=t.purseName1,l=t.assayId0,u=t.assayId1,s=t.extent0,m=t.extent1,p=t.status;return r.a.createElement(M.a,{key:c,value:c,divider:!0},r.a.createElement(G.a,null,r.a.createElement(ne.a,{edge:"start",className:e.icon})),r.a.createElement(L.a,{container:!0,direction:"column"},r.a.createElement(L.a,{item:!0},r.a.createElement(w.a,{variant:"body2",display:"block"},"".concat(a," - ").concat(function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}(c)))),r.a.createElement(L.a,{item:!0},r.a.createElement(w.a,{variant:"body1"},"Pay\xa0",r.a.createElement(ee.a,{component:"span",fontWeight:800},s,"\xa0",l,"\xa0"),"from\xa0",o),r.a.createElement(w.a,{variant:"body1"},"to receive\xa0",r.a.createElement(ee.a,{component:"span",fontWeight:800},m,"\xa0",u,"\xa0"),"into\xa0",i))),r.a.createElement(te.a,{className:e.buttons},"decline"===p&&r.a.createElement(me,{variant:"outlined",label:"Declined"}),"accept"===p&&r.a.createElement(pe,{variant:"outlined",label:"Accepted"}),!p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{size:"small","aria-label":"Decline",onClick:function(){return function(e){n({type:"REJECT_OFFER",payload:e})}(c)}},r.a.createElement(ce.a,null)),r.a.createElement(se,{size:"small","aria-label":"Accept",onClick:function(){return function(e){n({type:"CONFIRM_OFFER",payload:e})}(c)}},r.a.createElement(ie.a,null)))))}))):r.a.createElement(w.a,{color:"inherit"},"No transactions."))}var de=Object(j.a)((function(e){return{paper:Object(T.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),title:{padding:e.spacing(0,0,4)},aside:{borderRightColor:e.palette.divider,borderRightStyle:"solid",borderRightWidth:1}}}));function fe(){var e=de();return r.a.createElement(J.a,{className:e.paper},r.a.createElement(w.a,{component:"h1",variant:"h4",align:"center",className:e.title},"Wallet"),r.a.createElement(L.a,{container:!0,spacing:2},r.a.createElement(L.a,{item:!0,xs:4,className:e.aside},r.a.createElement(K,null)),r.a.createElement(L.a,{item:!0,xs:8},r.a.createElement(Ee,null))))}var ge=Object(j.a)((function(e){return{layout:Object(T.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(1e3+2*e.spacing(2)),{width:1e3,marginLeft:"auto",marginRight:"auto"})}}));var ve=Object(o.a)({palette:{primary:{main:"#AB2328"},secondary:{main:"#508AA8"}},typography:{useNextVariants:!0}});Object(c.render)(r.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(y,{active:!1,connected:!1,account:null,purses:null,inbox:null}),c=Object(l.a)(a,2),o=c[0],i=c[1],u=o.active;return Object(n.useEffect)((function(){function e(e){if(e){var t=e.type,a=e.data;"walletUpdatePurses"===t&&i(b(JSON.parse(a))),"walletUpdateInbox"===t&&i(O(JSON.parse(a)))}}u?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g()||f(e)}({onConnect:function(){i({type:"SERVER_CONNECTED"}),p({type:"walletGetPurses"}).then(e),p({type:"walletGetInbox"}).then(e)},onDisconnect:function(){i({type:"SERVER_DISCONNECTED"}),i({type:"DEACTIVATE_CONNECTION"}),i(b(null)),i(O(null))},onMessage:function(t){e(JSON.parse(t))}}):v()}),[u]),r.a.createElement(N.Provider,{value:{state:o,dispatch:i}},t)}),null,r.a.createElement(i.a,{theme:ve},r.a.createElement((function(){var e=ge();return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),r.a.createElement(x,null,r.a.createElement(B,null)),r.a.createElement("main",{className:e.layout},r.a.createElement(fe,null)))}),null))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.10025eb6.chunk.js.map