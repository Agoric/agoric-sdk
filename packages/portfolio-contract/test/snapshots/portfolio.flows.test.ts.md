# Snapshot report for `test/portfolio.flows.test.ts`

The actual snapshot is saved in `portfolio.flows.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## open portfolio with no positions

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 0,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 0,
        },
      ],
    ]

## open portfolio with USDN position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iCwoFdXVzZG4SAjk3',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAjk3',
          },
        ],
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 1,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 1,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.flows.flow1',
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          depth: 3,
          dest: 'position1',
          how: 'Swap, Lock',
          src: 'cosmos:noble-3:noble11028',
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'cosmos:noble-3:noble11028',
          netTransfers: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          protocol: 'USDN',
          totalIn: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          totalOut: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
        },
      ],
    ]

## open portfolio with Aave and USDN positions

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 3333000000n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EhMKBXV1c2RjEgozMzMzMDAwMDAwGgcSBXV1c2RuIhMKBXV1c2RuEgozMzMzMDAwMDAw',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaCjMzMzMwMDAwMDA=',
          },
        ],
      },
      {
        _method: 'localTransfer',
        amounts: {
          AaveAccount: {
            brand: Object @Alleged: USDC brand {},
            value: 150n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-5',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 150n,
        },
        opts: {
          memo: '{"destination_chain":"Ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":2,"fee":{"amount":"75","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _method: 'localTransfer',
        amounts: {
          Aave: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 3333000000n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'depositForBurn',
        denomAmount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 3333000000n,
        },
        destinationAddress: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
      },
      {
        _method: 'localTransfer',
        amounts: {
          AaveGmp: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-6',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 100n,
        },
        opts: {
          memo: '{"destination_chain":"Ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,9,94,167,179,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,198,169,139,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,132,97,123,160,55,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,198,169,139,64,0,0,0,0,0,0,0,0,0,0,0,0,61,163,5,2,8,163,242,224,208,75,51,103,74,170,123,26,159,155,49,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":2,"fee":{"amount":"50","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 1,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 2,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.flows.flow1',
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          depth: 3,
          dest: 'position1',
          how: 'Swap, Lock',
          src: 'cosmos:noble-3:noble11028',
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'cosmos:noble-3:noble11028',
          netTransfers: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          protocol: 'USDN',
          totalIn: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          totalOut: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position2',
        {
          accountId: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
          protocol: 'Aave',
        },
      ],
    ]

## open portfolio with Aave position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          AaveAccount: {
            brand: Object @Alleged: USDC brand {},
            value: 50n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-5',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 50n,
        },
        opts: {
          memo: '{"destination_chain":"Ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":2,"fee":{"amount":"25","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _method: 'localTransfer',
        amounts: {
          Aave: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 300n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'depositForBurn',
        denomAmount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 300n,
        },
        destinationAddress: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
      },
      {
        _method: 'localTransfer',
        amounts: {
          AaveGmp: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-6',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 100n,
        },
        opts: {
          memo: '{"destination_chain":"Ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,9,94,167,179,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,132,97,123,160,55,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,44,0,0,0,0,0,0,0,0,0,0,0,0,61,163,5,2,8,163,242,224,208,75,51,103,74,170,123,26,159,155,49,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":2,"fee":{"amount":"50","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 0,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 1,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
          protocol: 'Aave',
        },
      ],
    ]

## handle failure in localTransfer from seat to local account

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 1,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 1,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.flows.flow1',
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          depth: 1,
          dest: 'cosmos:agoric-1:agoric11014',
          error: 'localTransfer from seat failed',
          how: 'localTransfer',
          src: 'seat:USDN',
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'cosmos:noble-3:noble11028',
          netTransfers: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          protocol: 'USDN',
          totalIn: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          totalOut: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
        },
      ],
    ]

## handle failure in IBC transfer

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'IBC transfer failed',
        },
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 1,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 1,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.flows.flow1',
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          depth: 1,
          dest: 'cosmos:agoric-1:agoric11014',
          error: 'IBC transfer failed',
          how: 'localTransfer',
          src: 'seat:USDN',
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'cosmos:noble-3:noble11028',
          netTransfers: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          protocol: 'USDN',
          totalIn: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          totalOut: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
        },
      ],
    ]

## handle failure in executeEncodedTx

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          denom: 'ibc/40F1B2458AEDA66431F9D44F48413240B8D28C072463E2BF53655728683583E3',
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iDAoFdXVzZG4SAzEwMA==',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAzEwMA==',
          },
        ],
      },
      {
        _cap: 'noble11028',
        _method: 'transfer',
        address: {
          chainId: 'agoric-1',
          value: 'agoric11014',
        },
        amount: {
          denom: 'uusdc',
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'Swap or Lock failed',
        },
      },
    ]

> Under "published", the "ymax0.portfolios" node is delegated to ymax.
> The example below illustrates the schema of the data published there.
> 
> See also board marshalling conventions (_to appear_).

    [
      [
        'published.ymax0.portfolios.portfolio1',
        {
          flowCount: 1,
          local: 'cosmos:agoric-1:agoric11014',
          noble: 'cosmos:noble-3:noble11028',
          positionCount: 1,
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.flows.flow1',
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          depth: 1,
          dest: 'cosmos:agoric-1:agoric11014',
          error: 'Swap or Lock failed',
          how: 'localTransfer',
          src: 'seat:USDN',
        },
      ],
      [
        'published.ymax0.portfolios.portfolio1.positions.position1',
        {
          accountId: 'cosmos:noble-3:noble11028',
          netTransfers: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          protocol: 'USDN',
          totalIn: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
          totalOut: {
            brand: Object @Alleged: USDC brand {},
            value: 0n,
          },
        },
      ],
    ]
