# Snapshot report for `test/portfolio.flows.test.ts`

The actual snapshot is saved in `portfolio.flows.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## open portfolio with USDN position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iDAoFdXVzZG4SAzEwMA==',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAzEwMA==',
          },
        ],
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

## open portfolio with Aave position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          Account: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-5',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 300n,
        },
        opts: {
          memo: '{"destination_chain":"ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":1,"fee":{"amount":"undefined","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _method: 'localTransfer',
        amounts: {
          Aave: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 300n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'depositForBurn',
        denomAmount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 300n,
        },
        destinationAddress: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
      },
      {
        _method: 'localTransfer',
        amounts: {
          Gmp: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-6',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 100n,
        },
        opts: {
          memo: '{"destination_chain":"ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,68,9,94,167,179,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,132,97,123,160,55,0,0,0,0,0,0,0,0,0,0,0,0,202,199,255,168,44,15,67,235,176,252,17,252,211,33,35,236,164,102,38,207,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,44,0,0,0,0,0,0,0,0,0,0,0,0,61,163,5,2,8,163,242,224,208,75,51,103,74,170,123,26,159,155,49,60,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":1,"fee":{"amount":"undefined","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

## open portfolio with Compound position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          Account: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-5',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 300n,
        },
        opts: {
          memo: '{"destination_chain":"ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":1,"fee":{"amount":"undefined","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _method: 'localTransfer',
        amounts: {
          Compound: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 300n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'depositForBurn',
        denomAmount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 300n,
        },
        destinationAddress: 'eip155:1:0x3dA3050208a3F2e0d04b33674aAa7b1A9F9B313C',
      },
      {
        _method: 'localTransfer',
        amounts: {
          Gmp: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          Gmp: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: `sendGmp failed: InvalidAddressError: Address "0xA0b86a33E6A3E81E27Da9c18c4A77c9Cd4e08D57" is invalid.␊
          ␊
          - Address must be a hex value of 20 bytes (40 hex characters).␊
          - Address must match its checksum counterpart.␊
          ␊
          Version: viem@2.31.0`,
        },
      },
    ]

## handle failure in IBC transfer

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'IBC transfer failed',
        },
      },
    ]

## handle failure in executeEncodedTx

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iDAoFdXVzZG4SAzEwMA==',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAzEwMA==',
          },
        ],
      },
      {
        _cap: 'noble11028',
        _method: 'transfer',
        address: {
          chainId: 'agoric-1',
          value: 'agoric11014',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'Swap or Lock failed',
        },
      },
    ]
