# Snapshot report for `test/portfolio.flows.test.ts`

The actual snapshot is saved in `portfolio.flows.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## open portfolio with USDN position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iDAoFdXVzZG4SAzEwMA==',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAzEwMA==',
          },
        ],
      },
      {
        _cap: 'seat',
        _method: 'exit',
        completion: undefined,
      },
    ]

## open portfolio with Aave position

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          Account: {
            brand: Object @Alleged: USDC brand {},
            value: 300n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'axelar-5',
          encoding: 'bech32',
          value: 'axelar1dv4u5k73pzqrxlzujxg3qp8kvc3pje7jtdvu72npnt5zhq05ejcsn5qme5',
        },
        amount: {
          denom: 'ibc/TODO what is the right hash?',
          value: 300n,
        },
        opts: {
          memo: '{"destination_chain":"ethereum","destination_address":"0xef8651dD30cF990A1e831224f2E0996023163A81","payload":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":1,"fee":{"amount":"undefined","recipient":"axelar1zl3rxpp70lmte2xr6c4lgske2fyuj3hupcsvcd"}}',
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'In "getGMPAddress" method of (Portfolio keeper): result: Expected tagged object, not "promise": "[Promise]"',
        },
      },
    ]

## handle failure in IBC transfer

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'IBC transfer failed',
        },
      },
    ]

## handle failure in executeEncodedTx

> call log

    [
      {
        _cap: 'agoric11014',
        _method: 'monitorTransfers',
        tap: Object @Alleged: Portfolio tap {},
      },
      {
        _method: 'localTransfer',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
        sourceSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
      },
      {
        _cap: 'agoric11014',
        _method: 'transfer',
        address: {
          chainId: 'noble-3',
          value: 'noble11028',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _cap: 'noble11028',
        _method: 'executeEncodedTx',
        msgs: [
          {
            typeUrl: '/noble.swap.v1.MsgSwap',
            value: 'Cgpub2JsZTExMDI4EgwKBXV1c2RjEgMxMDAaBxIFdXVzZG4iDAoFdXVzZG4SAzEwMA==',
          },
          {
            typeUrl: '/noble.dollar.vaults.v1.MsgLock',
            value: 'Cgpub2JsZTExMDI4EAEaAzEwMA==',
          },
        ],
      },
      {
        _cap: 'noble11028',
        _method: 'transfer',
        address: {
          chainId: 'agoric-1',
          value: 'agoric11014',
        },
        amount: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
        opts: undefined,
      },
      {
        _method: 'withdrawToSeat',
        amounts: {
          USDN: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
        },
        destSeat: {
          exit: Function exit {},
          fail: Function fail {},
          getProposal: Function getProposal {},
          hasExited: Function hasExited {},
        },
        localAccount: Object @Alleged: AgoricAccount {
          executeEncodedTx: AsyncFunction {},
          getAddress: Function getAddress {},
          monitorTransfers: AsyncFunction {},
          transfer: AsyncFunction {},
        },
      },
      {
        _cap: 'seat',
        _method: 'fail',
        reason: Error {
          message: 'Swap or Lock failed',
        },
      },
    ]
