# Snapshot report for `test/portfolio.contract.test.ts`

The actual snapshot is saved in `portfolio.contract.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## open portfolio with USDN position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 1,
        positionKeys: [
          'USDN',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'USDN',
          how: 'USDN',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.USDN': {
        accountId: 'cosmos:noble-1:cosmos1test',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'USDN',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
    }

## open a portfolio with Aave position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 1,
        positionKeys: [
          'Aave_Arbitrum',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Aave_Arbitrum',
          how: 'Aave',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Aave_Arbitrum': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'Aave',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
    }

## open a portfolio with Compound position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 1,
        positionKeys: [
          'Compound_Arbitrum',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Compound_Arbitrum',
          how: 'Compound',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Compound_Arbitrum': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'Compound',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
      GmpFee: {
        brand: Object @Alleged: BLD brand {},
        value: 0n,
      },
    }

## open portfolio with USDN, Aave positions

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 1,
        positionKeys: [
          'Aave_Arbitrum',
          'USDN',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 6666660000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 6666660000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'USDN',
          how: 'USDN',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 4,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Aave_Arbitrum',
          how: 'Aave',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 5,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Aave_Arbitrum': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'Aave',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
      'orchtest.portfolios.portfolio0.positions.USDN': {
        accountId: 'cosmos:noble-1:cosmos1test',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'USDN',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
    }

## open portfolio with target allocations

> portfolio

    {
      accountIdByChain: {
        agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
      },
      deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
      flowCount: 0,
      positionKeys: [],
      targetAllocation: {
        Aave_Arbitrum: 1n,
        Compound_Arbitrum: 1n,
        USDN: 1n,
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
    }

## claim rewards on Aave position successfully

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 2,
        positionKeys: [
          'Aave_Arbitrum',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Aave_Arbitrum',
          how: 'Aave',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.flows.flow2': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 100n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'Aave',
          src: 'Aave_Arbitrum',
          step: 1,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Aave_Arbitrum': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333329900n,
        },
        protocol: 'Aave',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 100n,
        },
      },
    }

> rebalance payouts

    {
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 3333330000n,
      },
    }

## open a portfolio with Beefy position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 1,
        positionKeys: [
          'Beefy_re7_Avalanche',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Beefy_re7_Avalanche',
          how: 'Beefy',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Beefy_re7_Avalanche': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        protocol: 'Beefy',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Deposit: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
    }

## Withdraw from a Beefy position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          Arbitrum: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        deposit: 'agoric1qyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqc09z0g',
        flowCount: 2,
        positionKeys: [
          'Beefy_re7_Avalanche',
        ],
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:Deposit',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC to Noble',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'CCTP',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'Beefy_re7_Avalanche',
          how: 'Beefy',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.flows.flow2': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          how: 'Beefy',
          src: 'Beefy_re7_Avalanche',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'CCTP',
          src: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'IBC from Noble',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333330000n,
          },
          dest: 'seat:Cash',
          how: 'withdrawToSeat',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 4,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.Beefy_re7_Avalanche': {
        accountId: 'eip155:42161:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
        protocol: 'Beefy',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 3333330000n,
        },
      },
    }

> refund payouts

    {
      Cash: {
        brand: Object @Alleged: USDC brand {},
        value: 3333330000n,
      },
    }
