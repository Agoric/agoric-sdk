# Snapshot report for `test/portfolio.contract.test.ts`

The actual snapshot is saved in `portfolio.contract.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## open portfolio with USDN position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        flowCount: 1,
        positionCount: 1,
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000100n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'localTransfer',
          src: 'seat:USDN',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000100n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC transfer',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          dest: 'position1',
          how: 'Swap, Lock',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.position1': {
        accountId: 'cosmos:noble-1:cosmos1test',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 3333000000n,
        },
        protocol: 'USDN',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333000000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      NobleFees: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
      USDN: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
    }

## open a portfolio with Aave position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        flowCount: 0,
        positionCount: 1,
      },
      'orchtest.portfolios.portfolio0.positions.position1': {
        accountId: 'eip155:8453:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        protocol: 'Aave',
      },
    }

> refund payouts

    {
      Aave: {
        brand: Object @Alleged: USDC brand {},
        value: 3333000000n,
      },
      AaveAccount: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
      AaveGmp: {
        brand: Object @Alleged: USDC brand {},
        value: 100n,
      },
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
    }

## open a portfolio with Compound position

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        flowCount: 0,
        positionCount: 1,
      },
      'orchtest.portfolios.portfolio0.positions.position1': {
        accountId: 'eip155:8453:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        protocol: 'Compound',
      },
    }

> refund payouts

    {
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
      Compound: {
        brand: Object @Alleged: USDC brand {},
        value: 3333000000n,
      },
      CompoundAccount: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
      CompoundGmp: {
        brand: Object @Alleged: USDC brand {},
        value: 100n,
      },
    }

## open portfolio with USDN, Aave positions

> vstorage

    {
      'orchtest.portfolios.portfolio0': {
        accountIdByChain: {
          agoric: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          noble: 'cosmos:noble-1:cosmos1test',
        },
        flowCount: 0,
        positionCount: 1,
      },
      'orchtest.portfolios.portfolio0.positions.position1': {
        accountId: 'eip155:8453:0x126cf3AC9ea12794Ff50f56727C7C66E26D9C092',
        protocol: 'Aave',
      },
    }

> refund payouts

    {
      Aave: {
        brand: Object @Alleged: USDC brand {},
        value: 3333000000n,
      },
      AaveAccount: {
        brand: Object @Alleged: USDC brand {},
        value: 0n,
      },
      AaveGmp: {
        brand: Object @Alleged: USDC brand {},
        value: 100n,
      },
      Access: {
        brand: Object @Alleged: Poc26 brand {},
        value: 1n,
      },
    }

## open portfolio with USDN position and withdraw funds

> vstorage after withdrawal

    {
      'orchtest.portfolios.portfolio0': {
        flowCount: 2,
        local: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
        noble: 'cosmos:noble-1:cosmos1test',
        positionCount: 1,
      },
      'orchtest.portfolios.portfolio0.flows.flow1': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000100n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'seat transfer',
          src: 'seat:USDNLock',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000100n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'IBC transfer',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          dest: 'position1',
          how: 'USDNLock',
          src: 'cosmos:noble-1:cosmos1test',
          step: 3,
        },
      ],
      'orchtest.portfolios.portfolio0.flows.flow2': [
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          dest: 'cosmos:noble-1:cosmos1test',
          how: 'USDNUnlock',
          src: 'position1',
          step: 1,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          dest: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          how: 'IBC transfer',
          src: 'cosmos:noble-1:cosmos1test',
          step: 2,
        },
        {
          amount: {
            brand: Object @Alleged: USDC brand {},
            value: 3333000000n,
          },
          dest: 'seat:USDNUnlock',
          how: 'seat transfer',
          src: 'cosmos:agoric-3:agoric1qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqp7zqht',
          step: 3,
        },
      ],
      'orchtest.portfolios.portfolio0.positions.position1': {
        accountId: 'cosmos:noble-1:cosmos1test',
        netTransfers: {
          brand: Object @Alleged: USDC brand {},
          value: 0n,
        },
        protocol: 'USDN',
        totalIn: {
          brand: Object @Alleged: USDC brand {},
          value: 3333000000n,
        },
        totalOut: {
          brand: Object @Alleged: USDC brand {},
          value: 3333000000n,
        },
      },
    }

> withdrawal payouts

    {
      USDNUnlock: {
        brand: Object @Alleged: USDC brand {},
        value: 3333000000n,
      },
    }
