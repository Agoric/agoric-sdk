# Snapshot report for `test/deposit-tools.test.ts`

The actual snapshot is saved in `deposit-tools.test.ts.snap`.

Generated by [AVA](https://avajs.dev).

## handleDeposit works with mocked dependencies

> Snapshot 1

    {
      policyVersion: 4,
      rebalanceCount: 2,
      steps: [
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 1000n,
          },
          dest: '@agoric',
          src: '+agoric',
        },
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 1000n,
          },
          dest: '@noble',
          src: '@agoric',
        },
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 475n,
          },
          dest: 'USDN',
          detail: {
            usdnOut: 474n,
          },
          src: '@noble',
        },
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 525n,
          },
          dest: '@Arbitrum',
          fee: {
            brand: Object @Alleged: fee brand (BLD) {},
            value: 15000000n,
          },
          src: '@noble',
        },
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 305n,
          },
          dest: 'Aave_Arbitrum',
          fee: {
            brand: Object @Alleged: fee brand (BLD) {},
            value: 15000000n,
          },
          src: '@Arbitrum',
        },
        {
          amount: {
            brand: Object @Alleged: mock brand {},
            value: 220n,
          },
          dest: 'Compound_Arbitrum',
          fee: {
            brand: Object @Alleged: fee brand (BLD) {},
            value: 15000000n,
          },
          src: '@Arbitrum',
        },
      ],
    }

## handleDeposit handles different position types correctly

> Snapshot 1

    [
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 1000n,
        },
        dest: '@agoric',
        src: '+agoric',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 1000n,
        },
        dest: '@noble',
        src: '@agoric',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 431n,
        },
        dest: 'USDN',
        detail: {
          usdnOut: 430n,
        },
        src: '@noble',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 65n,
        },
        dest: 'USDNVault',
        detail: {
          usdnOut: 64n,
        },
        src: '@noble',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 306n,
        },
        dest: '@Avalanche',
        fee: {
          brand: Object @Alleged: fee brand (BLD) {},
          value: 15000000n,
        },
        src: '@noble',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 198n,
        },
        dest: '@Ethereum',
        fee: {
          brand: Object @Alleged: fee brand (BLD) {},
          value: 15000000n,
        },
        src: '@noble',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 198n,
        },
        dest: 'Compound_Ethereum',
        fee: {
          brand: Object @Alleged: fee brand (BLD) {},
          value: 15000000n,
        },
        src: '@Ethereum',
      },
      {
        amount: {
          brand: Object @Alleged: mock brand {},
          value: 306n,
        },
        dest: 'Aave_Avalanche',
        fee: {
          brand: Object @Alleged: fee brand (BLD) {},
          value: 15000000n,
        },
        src: '@Avalanche',
      },
    ]
